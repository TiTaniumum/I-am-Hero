<UserControl x:Class="I_am_Hero_WPF.Views.AttributeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:c="clr-namespace:I_am_Hero_WPF.Properties" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>


        <Grid Margin="0 0 0 10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBox Grid.Column="0"
             Margin="0 0 10 0"
             Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
             materialDesign:HintAssist.Hint="Поиск по названию..."
             Style="{DynamicResource MaterialDesignOutlinedTextBox}"
             HorizontalAlignment="Stretch"/>

            <ComboBox Grid.Column="1"
              Width="120"
              Margin="0 0 10 0"
              ItemsSource="{Binding SortOptions}"
              SelectedItem="{Binding SelectedSortOption}"
              materialDesign:HintAssist.Hint="Сортировать по"
              Style="{DynamicResource MaterialDesignOutlinedComboBox}"/>

            <Button Grid.Column="2"
            Content="Очистить"
            Command="{Binding ClearSearchCommand}"
            Style="{DynamicResource MaterialDesignOutlinedButton}"/>
        </Grid>

        <!-- Карточки атрибутов -->
        <ScrollViewer Grid.Row="1">
            <ItemsControl ItemsSource="{Binding FilteredAttributes}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel IsItemsHost="True" HorizontalAlignment="Center" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="{DynamicResource MaterialDesignPaper}"
                                Padding="10"
                                CornerRadius="10"
                                Margin="10"
                                Width="250"
                                Height="120"
                                BorderBrush="{DynamicResource PrimaryHueMidBrush}"
                                BorderThickness="2"
                                Effect="{DynamicResource MaterialDesignElevationShadow}">
                            <StackPanel>
                                <TextBlock Text="{Binding Name}" 
                                           FontSize="16" 
                                           FontWeight="Bold"
                                           Foreground="{DynamicResource PrimaryHueMidBrush}"/>

                                <TextBlock Text="{Binding Description}" 
                                           FontSize="14"
                                           TextWrapping="Wrap"
                                           Foreground="Gray" 
                                           Margin="0,5,0,5"/>

                                <ProgressBar Value="{Binding Value}" 
                                             Minimum="{Binding MinValue}" 
                                             Maximum="{Binding MaxValue}"
                                             Height="8"
                                             Margin="0,5,0,0"
                                             Foreground="Blue"
                                             Background="LightGray"/>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</UserControl>
